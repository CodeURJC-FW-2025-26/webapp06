<!doctype html>
<html lang="es">

{{> header}}

  <main class="container section m-5">
    <div class="row g-4 align-items-start">
      <div class="col-12 col-lg-5">
        {{#brand}}
        <div class="card">
          <img src="/brand/{{_id}}/image" class="card-img-top" alt="Logo de {{name}}">
          <div class="card-body">
            <h1 class="h4" href="brand/{{_id}}">{{name}}</h1>
            <p class="mb-1"><strong>País de origen:</strong> {{country_origin}}</p>
            <p class="mb-1"><strong>Año de fundación:</strong> {{founded_year}}</p>
            <p class="mb-3"><strong>Descripción:</strong> {{description}}</p>
            <div class="d-flex gap-2">

              <form action="/brand/{{brand._id}}/delete" method="POST" class="d-inline js-delete-brand">
                <button class="btn btn-outline-danger" type="submit"> Borrar </button>
              </form>

              <a class="btn btn-outline-primary" href="/brand/{{brand._id}}/edit">
                Editar
              </a>

              <a class="btn btn-primary" href="/index">Volver a página principal</a>

            </div>
          </div>
        </div> 
        {{/brand}}

      </div>
      <div class="col-12 col-lg-7">
        <h2 class="h5 mb-3">Modelos</h2>
        <div class="row g-4">
          <!-- Model -->
          {{#brand}}
          {{#models}}
          <div class="col-12 col-md-6">
            <div class="card h-100">
              <img src="/brand.models/{{_id}}/image" class="card-img-top" alt="Imagen de la sneaker {{name}}">
              <div class="card-body">
                <h5 class="card-title">{{name}}</h5>
                <p class="mb-1 small text-muted">{{category}} · {{release_year}}</p>
                <p class="mb-1 small text-muted">Colorway: {{colorway}} · Tallas: {{size_range}}</p>
                <p class="fw-semibold">{{price}} € <span class="badge badge-soft ms-2">⭐ {{average_rating}}</span></p>
                <div class="d-flex gap-2">

                  <a class="btn btn-outline-primary btn-sm" href="/brand/{{brand._id}}/model/{{_id}}/edit">
                    Editar
                  </a>

                  <form action="/brand/{{brand._id}}/model/{{_id}}/delete" method="POST" class="js-delete-model">
                    <button class="btn btn-outline-danger btn-sm" type="submit">Borrar</button>
                  </form>

                </div>
              </div>
            </div>
          </div>
          {{/models}}
          {{/brand}}
        </div>
        <hr class="my-4">
        <h3 class="h6">Añadir nuevo modelo</h3>
        <form class="row g-3 mt-1" action="/brand/{{brand._id}}/model/new" method="post" enctype="multipart/form-data">
          <div class="col-12 col-md-6">
            <label for="name" class="form-label">Nombre del modelo</label>
            <input type="text" id="name" name="name" class="form-control" placeholder="Ej. Air Zoom" required>
          </div>
          <div class="col-12 col-md-6">
            <label for="category" class="form-label">Categoría</label>
            <select id="category" name="category" class="form-select" required>
              <option value="">Selecciona...</option>
              <option>Running</option>
              <option>Lifestyle</option>
              <option>Basketball</option>
              <option>Skate</option>
              <option>Tenis</option>
              <option>Football</option>
              <option>Training</option>
            </select>
          </div>
          <div class="col-12">
            <label for="description" class="form-label">Descripción</label>
            <textarea id="description" name="description" class="form-control" rows="3"
              placeholder="Breve descripción del producto" required></textarea>
          </div>
          <div class="col-6 col-md-4">
            <label for="release_year" class="form-label">Año de lanzamiento</label>
            <input type="number" id="release_year" name="release_year" class="form-control" min="1970" max="2025"
              step="1" required>
          </div>
          <div class="col-6 col-md-4">
            <label for="price" class="form-label">Precio (€)</label>
            <input type="number" id="price" name="price" class="form-control" min="0" step="0.01" required>
          </div>
          <div class="col-12 col-md-4">
            <label for="average_rating" class="form-label">Valoración media</label>
            <input type="number" id="average_rating" name="average_rating" class="form-control" min="0" max="5"
              step="0.1">
          </div>
          <div class="col-12 col-md-6">
            <label for="colorway" class="form-label">Colorway</label>
            <input type="text" id="colorway" name="colorway" class="form-control" placeholder="Black/White">
          </div>
          <div class="col-12 col-md-6">
            <label for="size_range" class="form-label">Tallas (EU)</label>
            <input type="text" id="size_range" name="size_range" class="form-control" placeholder="40-45">
          </div>
          <div class="col-12">
            <label for="cover_image" class="form-label">Imagen principal</label>
            <input type="file" id="cover_image" name="cover_image" class="form-control" accept="image/*">
          </div>
          <div class="col-12">
            <button class="btn btn-primary" type="submit">Crear</button>
          </div>
        </form>
      </div>
    </div>
  </main>

{{> footer}}
